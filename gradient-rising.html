<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sarvam-style Glow (trigger at bottom touch)</title>

    <style>
        :root {
            --bg: #fff;
            --text: #111;
        }

        * {
            box-sizing: border-box;
        }

        body {
            margin: 0;
            font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
            background: var(--bg);
            color: var(--text);
        }

        /* Dummy above */
        .dummy {
            min-height: 140vh;
            display: grid;
            place-items: center;
            padding: 72px 20px;
            background: #f6f7fb;
        }

        .dummy h1 {
            margin: 0;
            font-size: clamp(30px, 4vw, 56px);
            letter-spacing: -0.02em;
        }

        .dummy p {
            margin: 14px 0 0;
            max-width: 780px;
            line-height: 1.6;
            opacity: .75;
        }

        /* Target section */
        .glow-section {
            position: relative;
            min-height: 150vh;
            /* taller so you can reach the ‚Äúbottom touch‚Äù point */
            overflow: hidden;
            background: #fff;
            display: grid;
            place-items: center;
            padding: 90px 20px;
        }

        .glow-content {
            position: relative;
            z-index: 3;
            text-align: center;
            max-width: 920px;
        }

        .glow-content h2 {
            margin: 0;
            font-size: clamp(26px, 3.8vw, 50px);
            letter-spacing: -0.02em;
        }

        .glow-content p {
            margin: 14px auto 0;
            max-width: 720px;
            line-height: 1.65;
            opacity: .75;
        }

        .soft-vignette {
            position: absolute;
            inset: 0;
            z-index: 0;
            pointer-events: none;
            background: radial-gradient(1200px 540px at 50% 22%, rgba(0, 0, 0, 0.04), transparent 60%);
        }

        /* Glow layer */
        .bottom-glow {
            position: absolute;
            left: 50%;
            bottom: -70px;
            /* anchor */
            width: min(1200px, 96vw);
            pointer-events: none;
            z-index: 2;
            transform-origin: center bottom;
            will-change: transform, opacity;
            opacity: 0;
        }

        /*
        ‚úÖ Sentinel at the very bottom of the section.
        We trigger when THIS hits the bottom of the viewport.
        This is more reliable than "bottom bottom" on the section itself.
      */
        .glow-sentinel {
            position: absolute;
            left: 0;
            right: 0;
            bottom: 0;
            height: 2px;
            pointer-events: none;
            opacity: 0;
        }
    </style>
</head>

<body>
    <section class="dummy">
        <div>
            <h1>Scroll down üëá</h1>
            <p>
                The glow will animate only when you reach the bottom edge of the next section
                (when the section‚Äôs bottom ‚Äútouches‚Äù the viewport bottom). No pause.
            </p>
        </div>
    </section>

    <section class="glow-section" id="glowSection">
        <div class="soft-vignette"></div>

        <div class="glow-content">
            <h2>Bottom touch ‚Üí rise + scale</h2>
            <p>
                Trigger is a 2px sentinel pinned to the bottom of this section,
                so it always fires at the exact ‚Äútouch bottom‚Äù moment.
            </p>
        </div>

        <!-- ‚úÖ Sentinel -->
        <div class="glow-sentinel" id="glowSentinel"></div>

        <!-- Glow -->
        <div class="bottom-glow" id="bottomGlow" aria-hidden="true">
            <svg viewBox="0 0 2292 833" width="100%" height="auto" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <filter id="softBlur" x="-10" y="-10" width="2312" height="853" filterUnits="userSpaceOnUse">
                        <feGaussianBlur stdDeviation="25" />
                    </filter>

                    <radialGradient id="glowGrad" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse"
                        gradientTransform="matrix(0 -1256.51 2148.88 -11.8434 1146 1272)">
                        <stop offset="0.327754" stop-color="#F9730C" />
                        <stop offset="0.423421" stop-color="#FFA336" />
                        <stop offset="0.536751" stop-color="#F0D5BA" />
                        <stop offset="0.635122" stop-color="#CBDBFF" />
                        <stop offset="1" stop-color="#FAFAFA" stop-opacity="0" />
                    </radialGradient>

                    <clipPath id="clip">
                        <rect width="2292" height="833" fill="white"></rect>
                    </clipPath>
                </defs>

                <g clip-path="url(#clip)">
                    <g filter="url(#softBlur)">
                        <path d="M1113.5 40C502.673 39.9999 40 793 40 793H2252C2252 793 1724.33 40 1113.5 40Z"
                            fill="url(#glowGrad)" />
                    </g>
                </g>
            </svg>
        </div>
    </section>

    <!-- GSAP -->
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/ScrollTrigger.min.js"></script>

    <script>
        gsap.registerPlugin(ScrollTrigger);

        const glow = document.getElementById("bottomGlow");
        const sentinel = document.getElementById("glowSentinel");

        function resetGlow() {
            gsap.set(glow, {
                xPercent: -50,
                y: "195vh",      // ‚úÖ fully out of screen
                scaleX: 1.5,    // ‚úÖ sarvam-like wide/tall start
                scaleY: 3.0,
                opacity: 0
            });
        }
        resetGlow();

        const riseTl = gsap.timeline({ paused: true })
            .to(glow, {
                opacity: 1,
                duration: 0.25,
                ease: "power2.out"
            }, 0)
            .to(glow, {
                // ‚úÖ rises MORE up (increase to -35vh if you want even higher)
                y: "-3vh",
                // ‚úÖ scales while rising (settles)
                scaleX: 1.55,
                scaleY: 1.12,
                duration: 1.35,
                ease: "power3.out"
            }, 0);

        let played = false;

        ScrollTrigger.create({
            trigger: sentinel,

            // ‚úÖ exact ‚Äútouch bottom‚Äù moment:
            // when sentinel TOP hits viewport BOTTOM
            start: "top bottom",

            onEnter: () => {
                if (played) return;
                played = true;
                riseTl.play(0);
            },

            onLeaveBack: () => {
                played = false;
                riseTl.pause(0);
                resetGlow();
            },

            // If you want to debug, uncomment:
            // markers: true
        });

        // Make sure positions are correct after layout/fonts load
        window.addEventListener("load", () => ScrollTrigger.refresh());
        window.addEventListener("resize", () => ScrollTrigger.refresh());
        setTimeout(() => ScrollTrigger.refresh(), 250);
    </script>
</body>

</html>